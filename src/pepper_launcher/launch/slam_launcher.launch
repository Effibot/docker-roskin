<launch>
    <arg name="nao_ip"            default="$(optenv NAO_IP 10.1.1.3)" />
    <arg name="nao_port"          default="$(optenv NAO_PORT 9559)" />
    <arg name="namespace"           default="pepper_robot" />
    <arg name="network_interface"  default="docker0"/>
    <arg name="rviz" default="true" /> <!-- Autolaunch RViz -->

    <!-- Use CPP node by default for nao_sensors -->
    <arg name="force_python" default="true" />
    <include file="$(find pepper_description)/launch/pepper_publisher.launch" />

    <include file="$(find naoqi_driver)/launch/naoqi_driver.launch">
        <arg name="nao_ip"    value="$(arg nao_ip)" />
        <arg name="nao_port"  value="$(arg nao_port)" />
        <arg name="network_interface"  value="$(arg network_interface)" />
    </include>


    <arg name='expand_factor' default='10'/>
    <arg name='use_center' default='False'/>

    <node name='laser_expander' pkg='pepper_launcher' type='laser_expander.py' output='screen'>
        <param name='expand_factor' type='int' value='$(arg expand_factor)'/>
        <param name='use_center' type='bool' value='$(arg use_center)'/>
    </node>
    <node pkg="gmapping" type="slam_gmapping" name="gmap" output="screen" >
        <param name="base_frame" value="/base_footprint"/>
        <param name="odom_frame" value="/odom"/>
        <param name="map_frame" value="/map"/>
        <param name="scan_topic" value="/laser_expander"/>
        <param name="map_update_interval" value="1.0"/>
        <param name="maxUrange" value="2.0"/>
        <param name="sigma" value="0.05"/>
        <param name="kernelSize" value="1"/>
        <param name="lstep" value="0.05"/>
        <param name="astep" value="0.05"/>
        <param name="iterations" value="20"/>
        <param name="lsigma" value="0.075"/>
        <param name="ogain" value="3.0"/>
        <param name="lskip" value="0"/>
        <param name="minimumScore" value="0"/>
        <param name="srr" value="0.1"/>
        <param name="srt" value="0.2"/>
        <param name="str" value="0.1"/>
        <param name="stt" value="0.2"/>
        <param name="linearUpdate" value="0.5"/>
        <param name="angularUpdate" value="0.0698132"/>
        <param name="temporalUpdate" value="0.01"/>
        <param name="resampleThreshold" value="0.5"/>
        <param name="particles" value="300"/>
        <param name="xmin" value="-100.0"/>
        <param name="ymin" value="-100.0"/>
        <param name="xmax" value="100.0"/>
        <param name="ymax" value="100.0"/>
        <param name="delta" value="0.05"/>
        <param name="llsamplerange" value="0.01"/>
        <param name="llsamplestep" value="0.01"/>
        <param name="tranform_publish_period" value="0.05"/>
        <param name="occ_thresh" value="0.25"/>
        <param name="maxRange" value="3.0"/>
    </node>
<!-- RViz -->
    <node name="rviz" pkg="rviz" type="rviz" args="-d /home/dock/workspace/src/rviz_config/pepper.rviz" required="$(arg rviz)" />
</launch>